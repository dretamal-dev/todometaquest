---
import BotonCompra from "./BotonCompra.astro";

import { getCollection } from 'astro:content';
const guias = await getCollection('guias', ({ data }) => data.home === true);
const juegos = await getCollection('juegos', ({ data }) => data.home === true);
const accesorios = await getCollection('accesorios', ({ data }) => data.home === true);

const menu = [
	{ name: "Diccionario", href: "/diccionario" },
	{ name: "GuÃ­as", href: "/guias", submenu: guias.map(item => ({
			name: item.data.title,
			href: `/guias/${item.slug}`,
			caption: item.data.caption || '',
		})) },
	{ name: "Juegos", href: "/juegos", submenu: juegos.map(item => ({
			name: item.data.title,
			href: `/juegos/${item.slug}`,
			caption: item.data.caption || '',
		})) },
	{ name: "Accesorios recomendados", href: "/accesorios", submenu: accesorios.map(item => ({
			name: item.data.title,
			href: `/accesorios/${item.slug}`,
			caption: item.data.caption || '',
		})) },
	{ name: "Experiencias VR", href: "/experiencias" },
	{ name: "FAQ", href: "/faq" },
];
---

<header class="w-full flex justify-center z-9998">
	<div class="w-[80%] rounded-4xl mt-3 px-6 md:px-12 py-2 flex justify-between items-center text-white bg-zinc-900/50 fixed top-0 z-50 backdrop-blur-sm">
		<!-- Logo -->
		<a href="/" class="group text-xl font-bold transition flex items-center flex-row" title="MisiÃ³n Tres ðŸš€">

			<svg class="opacity-70 group-hover:scale-x-[-1] transition-all duration-300 group-hover:opacity-100 fill-white h-[40px]" viewBox="0 0 538 427" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><path opacity="1.00" d=" M 90.03 119.13 C 108.97 119.24 127.91 119.11 146.85 119.19 C 165.51 163.75 183.07 208.77 201.55 253.41 C 204.77 248.26 206.47 242.40 208.78 236.83 C 224.70 197.66 240.00 158.25 256.19 119.19 C 317.22 119.11 378.25 119.23 439.28 119.13 C 439.10 135.90 440.20 152.94 438.76 169.54 C 399.70 186.45 359.73 201.37 320.54 218.05 C 359.87 234.65 399.81 249.83 439.29 266.09 C 439.33 283.34 439.76 300.61 439.05 317.84 C 381.29 318.11 323.52 317.84 265.76 317.98 C 263.43 303.43 264.98 288.50 264.86 273.81 C 290.90 273.38 316.95 273.75 343.00 273.62 C 350.11 273.47 357.30 274.22 364.33 272.82 C 332.37 260.04 299.81 248.67 267.66 236.36 C 264.01 235.33 264.70 230.96 264.58 228.04 C 264.83 219.71 264.31 211.35 264.81 203.03 C 264.60 199.54 268.57 199.12 271.00 198.00 C 302.41 186.08 334.14 174.92 365.32 162.43 C 336.32 162.13 307.32 162.30 278.32 162.34 C 261.34 207.70 244.46 253.09 227.47 298.45 C 224.99 304.95 222.87 311.60 219.74 317.83 C 207.50 318.12 195.25 317.95 183.01 317.92 C 180.66 313.99 179.10 309.68 177.52 305.41 C 164.51 271.48 152.57 237.09 138.95 203.41 C 137.96 240.13 138.98 276.93 138.46 313.67 C 138.31 316.41 135.69 318.35 133.02 317.98 C 118.94 318.01 104.85 317.95 90.76 317.96 C 89.69 312.70 89.97 307.32 89.99 302.00 C 90.03 241.04 89.96 180.08 90.03 119.13 Z" /></g></svg>



			<!-- <svg class="fill-rose-800" width="30" viewBox="-13 0 282 282" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M116.504 3.58c6.962-3.985 16.03-4.003 22.986 0 34.995 19.774 70.001 39.517 104.99 59.303 6.581 3.707 10.983 11.031 10.916 18.614v118.968c.049 7.897-4.788 15.396-11.731 19.019-34.88 19.665-69.742 39.354-104.616 59.019-7.106 4.063-16.356 3.75-23.24-.646-10.457-6.062-20.932-12.094-31.39-18.15-2.137-1.274-4.546-2.288-6.055-4.36 1.334-1.798 3.719-2.022 5.657-2.807 4.365-1.388 8.374-3.616 12.384-5.778 1.014-.694 2.252-.428 3.224.193 8.942 5.127 17.805 10.403 26.777 15.481 1.914 1.105 3.852-.362 5.488-1.274 34.228-19.345 68.498-38.617 102.72-57.968 1.268-.61 1.969-1.956 1.866-3.345.024-39.245.006-78.497.012-117.742.145-1.576-.767-3.025-2.192-3.67-34.759-19.575-69.5-39.18-104.253-58.76a3.621 3.621 0 0 0-4.094-.006C91.2 39.257 56.465 58.88 21.712 78.454c-1.42.646-2.373 2.071-2.204 3.653.006 39.245 0 78.497 0 117.748a3.329 3.329 0 0 0 1.89 3.303c9.274 5.259 18.56 10.481 27.84 15.722 5.228 2.814 11.647 4.486 17.407 2.33 5.083-1.823 8.646-7.01 8.549-12.407.048-39.016-.024-78.038.036-117.048-.127-1.732 1.516-3.163 3.2-3 4.456-.03 8.918-.06 13.374.012 1.86-.042 3.14 1.823 2.91 3.568-.018 39.263.048 78.527-.03 117.79.012 10.464-4.287 21.85-13.966 26.97-11.924 6.177-26.662 4.867-38.442-1.056-10.198-5.09-19.93-11.097-29.947-16.55C5.368 215.886.555 208.357.604 200.466V81.497c-.073-7.74 4.504-15.197 11.29-18.85C46.768 42.966 81.636 23.27 116.504 3.58z"></path> <path d="M146.928 85.99c15.21-.979 31.493-.58 45.18 6.913 10.597 5.742 16.472 17.793 16.659 29.566-.296 1.588-1.956 2.464-3.472 2.355-4.413-.006-8.827.06-13.24-.03-1.872.072-2.96-1.654-3.195-3.309-1.268-5.633-4.34-11.212-9.642-13.929-8.139-4.075-17.576-3.87-26.451-3.785-6.479.344-13.446.905-18.935 4.715-4.214 2.886-5.494 8.712-3.99 13.404 1.418 3.369 5.307 4.456 8.489 5.458 18.33 4.794 37.754 4.317 55.734 10.626 7.444 2.572 14.726 7.572 17.274 15.366 3.333 10.446 1.872 22.932-5.56 31.318-6.027 6.901-14.805 10.657-23.56 12.697-11.647 2.597-23.734 2.663-35.562 1.51-11.122-1.268-22.696-4.19-31.282-11.768-7.342-6.375-10.928-16.308-10.572-25.895.085-1.619 1.697-2.748 3.248-2.615 4.444-.036 8.888-.048 13.332.006 1.775-.127 3.091 1.407 3.182 3.08.82 5.367 2.837 11 7.517 14.182 9.032 5.827 20.365 5.428 30.707 5.591 8.568-.38 18.186-.495 25.178-6.158 3.689-3.23 4.782-8.634 3.785-13.283-1.08-3.925-5.186-5.754-8.712-6.95-18.095-5.724-37.736-3.647-55.656-10.12-7.275-2.571-14.31-7.432-17.105-14.906-3.9-10.578-2.113-23.662 6.098-31.765 8.006-8.06 19.563-11.164 30.551-12.275z"></path> </g> </g></svg> -->
			<!-- <img src="/todo-meta-quest-logo.svg" alt="Todo Meta Quest" width="60" /> -->
			<!-- <div class="bg-[url('/todo-meta-quest-logo.svg')] bg-cover bg-center bg-no-repeat h-[40px] w-[100px] hover:scale-180 transition-all duration-300"></div> -->
			<!-- <div class="bg-[url('/todo-meta-quest-logo-2.svg')] bg-cover bg-center bg-no-repeat h-[40px] w-[140px] hover:scale-180 transition-all duration-300"></div> -->
			<!-- <div class="bg-[url('/todo-meta-quest-logo-3.svg')] bg-cover bg-center bg-no-repeat h-[40px] w-[140px] hover:scale-180 transition-all duration-300"></div> -->

			<!-- <span class="group-hover:animate-glitch">
				<span class="inline-block">M</span>
				<span class="inline-block rotate-90">M</span>
			</span>
 -->


			<!-- <span class="ml-2 text-gray-300 text-lg">Todo Meta Quest<small class="text-rose-800">.com</small></span> -->
		</a>
	
		<!-- Nav links -->
		<nav class="hidden md:flex space-x-6 relative">
			{menu.map((item, i) => (
				<div class="relative group" style="display: inline-block;">
					<a href={item.href} class="text-sm font-medium text-zinc-300 hover:text-white transition flex items-center">
						{item.name}
						{item.submenu && (
							<svg class="ml-1 w-3 h-3 fill-zinc-400 group-hover:fill-white transition" viewBox="0 0 10 6">
								<path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" fill="none" fill-rule="evenodd"/>
							</svg>
						)}
					</a>
					{item.submenu && (
						<div class="absolute left-0 mt-2 min-w-[640px] bg-zinc-800 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible hover:opacity-100 hover:visible transition-all duration-200 z-50">
							<div class="grid grid-cols-2 gap-2 p-3">
								{item.submenu.map((sub, idx) => (
									<a 
										href={sub.href} 
										class={`flex items-start gap-3 px-4 py-3 text-sm text-zinc-200 hover:bg-zinc-700 hover:text-white rounded-lg transition ${idx % 2 === 0 ? 'col-start-1' : 'col-start-2'}`}
									>
										{/* Icon placeholder */}
										<div class="w-8 h-8 bg-zinc-700 rounded flex items-center justify-center text-lg">
											<svg width="20" height="20" fill="none"><circle cx="10" cy="10" r="8" fill="#fff" /></svg>
										</div>
										<div>
											<div class="font-semibold">{sub.name}</div>
											<div class="text-xs text-zinc-400">{sub.caption}</div>
										</div>
									</a>
								))}
							</div>
						</div>
					)}
				</div>
			))}
		</nav>

		<BotonCompra label="Comprar Meta Quest 3" href="/guia-compra-meta-quest-3" />

		</div>
</header>
